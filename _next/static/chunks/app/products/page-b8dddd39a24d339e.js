(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{7116:function(e,r,t){Promise.resolve().then(t.bind(t,3266))},3266:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return ProductsPage}});var s=t(7437),a=t(2265),n=t(1396),o=t.n(n),c=t(8681);let i=[{id:"all",name:"すべて"},{id:"sake",name:"日本酒"},{id:"shochu",name:"焼酎"},{id:"wine",name:"ワイン"},{id:"beer",name:"ビール"},{id:"snack",name:"おつまみ"}];function ProductsPage(){let[e,r]=(0,a.useState)("all"),[t,n]=(0,a.useState)(""),[l,d]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let loadProducts=async()=>{try{await (0,c.KJ)();let e=await c.K0.getAll();d(e)}catch(e){console.error("商品の読み込みに失敗しました:",e)}finally{m(!1)}};loadProducts()},[]);let addToCart=async e=>{try{let r={id:Date.now(),productId:e.id,name:e.name,price:e.price,quantity:1,image:e.image,category:e.category};await c.P4.add(r),alert("カートに追加しました！")}catch(e){console.error("カートへの追加に失敗しました:",e),alert("カートへの追加に失敗しました")}},x=l.filter(r=>{let s="all"===e||r.category===e,a=r.name.toLowerCase().includes(t.toLowerCase())||r.description.toLowerCase().includes(t.toLowerCase())||r.tags.some(e=>e.toLowerCase().includes(t.toLowerCase()));return s&&a});return u?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-secondary-600",children:"商品を読み込み中..."})]})}):(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm rounded-lg mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-6",children:[(0,s.jsx)(o(),{href:"/",className:"text-3xl font-bold text-primary-600",children:"\uD83C\uDF76 酒屋"}),(0,s.jsxs)("nav",{className:"flex space-x-6",children:[(0,s.jsx)(o(),{href:"/",className:"text-secondary-600 hover:text-primary-600 transition-colors",children:"ホーム"}),(0,s.jsx)(o(),{href:"/diagnosis",className:"text-secondary-600 hover:text-primary-600 transition-colors",children:"お酒診断"}),(0,s.jsx)(o(),{href:"/random",className:"text-secondary-600 hover:text-primary-600 transition-colors",children:"ランダム提案"}),(0,s.jsx)(o(),{href:"/cart",className:"text-secondary-600 hover:text-primary-600 transition-colors",children:"カート"})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,s.jsx)("aside",{className:"lg:w-1/4",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-secondary-700 mb-4",children:"検索・絞り込み"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"商品検索"}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"商品名、説明、タグで検索",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"カテゴリー"}),(0,s.jsx)("div",{className:"space-y-2",children:i.map(t=>(0,s.jsx)("button",{onClick:()=>r(t.id),className:"w-full text-left px-3 py-2 rounded-lg transition-colors ".concat(e===t.id?"bg-primary-100 text-primary-700 font-medium":"text-secondary-600 hover:bg-gray-100"),children:t.name},t.id))})]})]})}),(0,s.jsxs)("main",{className:"lg:w-3/4",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-secondary-700 mb-2",children:"商品一覧"}),(0,s.jsxs)("p",{className:"text-secondary-600",children:[x.length,"件の商品が見つかりました"]})]}),(0,s.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>(0,s.jsxs)("div",{className:"card hover:shadow-lg transition-shadow",children:[(0,s.jsx)("div",{className:"bg-gray-200 h-48 rounded-lg mb-4 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-500",children:"商品画像"})}),(0,s.jsx)("h3",{className:"font-semibold text-secondary-700 mb-2",children:e.name}),(0,s.jsx)("p",{className:"text-secondary-600 text-sm mb-3",children:e.description}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs rounded-full",children:e},e))}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-primary-600 font-bold text-lg",children:["\xa5",e.price.toLocaleString()]}),e.alcoholPercent>0&&(0,s.jsxs)("p",{className:"text-secondary-500 text-sm",children:["アルコール度数: ",e.alcoholPercent,"%"]})]}),(0,s.jsx)("button",{onClick:()=>addToCart(e),className:"btn-primary",children:"カートに追加"})]})]},e.id))}),0===x.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-secondary-500 text-lg",children:"該当する商品が見つかりませんでした。"}),(0,s.jsx)("p",{className:"text-secondary-400 mt-2",children:"検索条件を変更してお試しください。"})]})]})]})]})}},8681:function(e,r,t){"use strict";t.d(r,{HI:function(){return o},K0:function(){return s},KJ:function(){return seedInitialData},P4:function(){return a},_9:function(){return n}});let initDB=()=>new Promise((e,r)=>{let t=indexedDB.open("SakeShopDB",1);t.onerror=()=>r(t.error),t.onsuccess=()=>e(t.result),t.onupgradeneeded=e=>{let r=e.target.result;if(!r.objectStoreNames.contains("products")){let e=r.createObjectStore("products",{keyPath:"id"});e.createIndex("category","category",{unique:!1}),e.createIndex("name","name",{unique:!1})}if(r.objectStoreNames.contains("cart")||r.createObjectStore("cart",{keyPath:"id"}),!r.objectStoreNames.contains("orders")){let e=r.createObjectStore("orders",{keyPath:"id"});e.createIndex("status","status",{unique:!1}),e.createIndex("date","date",{unique:!1})}if(!r.objectStoreNames.contains("users")){let e=r.createObjectStore("users",{keyPath:"id"});e.createIndex("email","email",{unique:!0})}r.objectStoreNames.contains("diagnosis_history")||r.createObjectStore("diagnosis_history",{keyPath:"id",autoIncrement:!0}),r.objectStoreNames.contains("random_history")||r.createObjectStore("random_history",{keyPath:"id",autoIncrement:!0})}}),s={getAll:async()=>{let e=await initDB();return new Promise((r,t)=>{let s=e.transaction(["products"],"readonly"),a=s.objectStore("products"),n=a.getAll();n.onsuccess=()=>r(n.result),n.onerror=()=>t(n.error)})},add:async e=>{let r=await initDB();return new Promise((t,s)=>{let a=r.transaction(["products"],"readwrite"),n=a.objectStore("products"),o=n.add(e);o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})},update:async e=>{let r=await initDB();return new Promise((t,s)=>{let a=r.transaction(["products"],"readwrite"),n=a.objectStore("products"),o=n.put(e);o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})},delete:async e=>{let r=await initDB();return new Promise((t,s)=>{let a=r.transaction(["products"],"readwrite"),n=a.objectStore("products"),o=n.delete(e);o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})},getByCategory:async e=>{let r=await initDB();return new Promise((t,s)=>{let a=r.transaction(["products"],"readonly"),n=a.objectStore("products"),o=n.index("category"),c=o.getAll(e);c.onsuccess=()=>t(c.result),c.onerror=()=>s(c.error)})}},a={getAll:async()=>{let e=await initDB();return new Promise((r,t)=>{let s=e.transaction(["cart"],"readonly"),a=s.objectStore("cart"),n=a.getAll();n.onsuccess=()=>r(n.result),n.onerror=()=>t(n.error)})},add:async e=>{let r=await initDB();return new Promise((t,s)=>{let a=r.transaction(["cart"],"readwrite"),n=a.objectStore("cart"),o=n.put(e);o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})},remove:async e=>{let r=await initDB();return new Promise((t,s)=>{let a=r.transaction(["cart"],"readwrite"),n=a.objectStore("cart"),o=n.delete(e);o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})},clear:async()=>{let e=await initDB();return new Promise((r,t)=>{let s=e.transaction(["cart"],"readwrite"),a=s.objectStore("cart"),n=a.clear();n.onsuccess=()=>r(),n.onerror=()=>t(n.error)})}},n={getAll:async()=>{let e=await initDB();return new Promise((r,t)=>{let s=e.transaction(["orders"],"readonly"),a=s.objectStore("orders"),n=a.getAll();n.onsuccess=()=>r(n.result),n.onerror=()=>t(n.error)})},add:async e=>{let r=await initDB();return new Promise((t,s)=>{let a=r.transaction(["orders"],"readwrite"),n=a.objectStore("orders"),o=n.add(e);o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})},updateStatus:async(e,r)=>{let t=await initDB();return new Promise((s,a)=>{let n=t.transaction(["orders"],"readwrite"),o=n.objectStore("orders"),c=o.get(e);c.onsuccess=()=>{let e=c.result;if(e){e.status=r;let t=o.put(e);t.onsuccess=()=>s(),t.onerror=()=>a(t.error)}else a(Error("Order not found"))},c.onerror=()=>a(c.error)})}},o={save:async e=>{let r=await initDB();return new Promise((t,s)=>{let a=r.transaction(["diagnosis_history"],"readwrite"),n=a.objectStore("diagnosis_history"),o=n.add(e);o.onsuccess=()=>t(),o.onerror=()=>s(o.error)})},getHistory:async()=>{let e=await initDB();return new Promise((r,t)=>{let s=e.transaction(["diagnosis_history"],"readonly"),a=s.objectStore("diagnosis_history"),n=a.getAll();n.onsuccess=()=>r(n.result),n.onerror=()=>t(n.error)})}},seedInitialData=async()=>{let e=await s.getAll();if(0===e.length)for(let e of[{id:1,name:"純米大吟醸 山田錦",category:"sake",price:3500,description:"山田錦を使用した上品な味わいの純米大吟醸酒",alcoholPercent:15.5,image:"/images/sake1.jpg",tags:["日本酒","純米大吟醸","山田錦"],stock:10,pairing:["刺身","天ぷら","和食"]},{id:2,name:"本格焼酎 黒霧島",category:"shochu",price:1200,description:"さつまいもの甘みが感じられる本格焼酎",alcoholPercent:25,image:"/images/shochu1.jpg",tags:["焼酎","さつまいも","本格"],stock:15,pairing:["焼き鳥","餃子","鍋料理"]},{id:3,name:"シャルドネ 白ワイン",category:"wine",price:2800,description:"フルーティーで爽やかな白ワイン",alcoholPercent:12,image:"/images/wine1.jpg",tags:["ワイン","白ワイン","シャルドネ"],stock:8,pairing:["魚料理","チーズ","サラダ"]},{id:4,name:"クラフトビール IPA",category:"beer",price:450,description:"ホップの苦味が効いたクラフトビール",alcoholPercent:6.5,image:"/images/beer1.jpg",tags:["ビール","クラフト","IPA"],stock:20,pairing:["ピザ","ハンバーガー","スパイシー料理"]},{id:5,name:"チーズ盛り合わせ",category:"snack",price:1800,description:"3種類のチーズの盛り合わせ",alcoholPercent:0,image:"/images/cheese1.jpg",tags:["おつまみ","チーズ","盛り合わせ"],stock:12,pairing:["ワイン","日本酒","ビール"]},{id:6,name:"ナッツミックス",category:"snack",price:680,description:"4種類のナッツをミックスした人気のおつまみ",alcoholPercent:0,image:"/images/nuts1.jpg",tags:["おつまみ","ナッツ","ミックス"],stock:25,pairing:["ビール","ウイスキー","焼酎"]}])await s.add(e)}},622:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=t(2265),a=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,r,t){var s,i={},l=null,d=null;for(s in void 0!==t&&(l=""+t),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(d=r.ref),r)n.call(r,s)&&!c.hasOwnProperty(s)&&(i[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps)void 0===i[s]&&(i[s]=r[s]);return{$$typeof:a,type:e,key:l,ref:d,props:i,_owner:o.current}}r.jsx=q,r.jsxs=q},7437:function(e,r,t){"use strict";e.exports=t(622)},1396:function(e,r,t){e.exports=t(8326)}},function(e){e.O(0,[326,971,472,744],function(){return e(e.s=7116)}),_N_E=e.O()}]);